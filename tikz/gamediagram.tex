\begin{tikzpicture}
  \node (shared) {
    $\begin{aligned}
      a_1 = x = b_2\\
      b_1 = y = a_2\\
      c_1 = z = c_2
    \end{aligned}$
  };

  \node (p3) at (shared.south east) {};
  \node[above=3 of p3] (p2) {};
  \node[left=4.5 of p3] (m2) {};
  \node[left=1 of m2] (p4) {};
  \node (m1) at (p2-|m2) {};
  \node (p1) at (m1-|p4) {};
  \node [left=0.4 of shared.north west] (text1) {$X_{1}\cup Y_{1}$};
  \fill[gray!50] (p1.center) -- (m1.center) -- (m2.center) -- (p4.center) -- cycle;
  \node [below left=0.5 and 0.5 of p4] (mark1) {$M$};
  \node [below=0.5 of m2] (mark3) {$0$};
  \node [above right=0.1 and 1.7 of m1] (S1) {$S_{1}$};
  
  \node (p5) at (shared.north west) {};
  \node[right=4.5 of p5] (m3) {};
  \node[right=1 of m3] (p6) {};
  \node[below=3 of p5] (p8) {};
  \node (m4) at (p8-|m3) {};
  \node (p7) at (m4-|p6) {};
  \node [right=0.4 of shared.south east] (text2) {$X_{2}\cup Y_{2}$};
  \fill[gray!50] (p6.center) -- (m3.center) -- (m4.center) -- (p7.center) -- cycle;
  \node [above right=0.5 and 0.5 of p6] (mark2) {$M$};
  \node [above=0.5 of m3] (mark4) {$0$};
  \node [above left=0.1 and 0.4 of m3] (S2) {$S_{2}$};

  \draw[p1] (p1.center) to (m1.center);
  \draw[p1] (m1.center) to (p2.center);
  \draw[p1] (p2.center) to (p3.center);
  \draw[p1] (p3.center) to (m2.center);
  \draw[p1] (m2.center) to (p4.center);
  \draw[p1] (p4.center) to (p1.center);
  \draw[dashed, p1] (m1.center) to (m2.center);
  \draw (mark1) to (p4.north east);
  \draw (mark3) to (text1.south);

  \draw[p2] (p5.center) to (m3.center);
  \draw[p2] (m3.center) to (p6.center);
  \draw[p2] (p6.center) to (p7.center);
  \draw[p2] (p7.center) to (m4.center);
  \draw[p2] (m4.center) to (p8.center);
  \draw[p2] (p8.center) to (p5.center);
  \draw[dashed, p2] (m3.center) to (m4.center);
  \draw (mark2) to (p6.south west);
  \draw (mark4) to (text2.north);
\end{tikzpicture}
