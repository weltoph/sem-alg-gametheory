\begin{tikzpicture}
  \node[label=above left:{$d_{1}=5$}] (left) {$X_{1}\cup Y_{1}$};
  \node[right=of left] (shared) {
    $\begin{aligned}
      x = a_{1} = b_{2}\\
      y = b_{1} = a_{2}\\
      z = c_{1} = c_{2}
    \end{aligned}$
    };
  \node[right=of shared, label=above right:{$d_{2}=4$}] (right) {$X_{2}\cup Y_{2}$};
  \node[above=0.1 of shared] (costs) {
    $c_{x}(t) = t, c_{y}(t) = 5\tfrac{1}{2}, c_{z}(t) = 4$};
  \node[left=of left, label=below:{$c_{e}(t)=M$}] (restleft) {$E\setminus(X_{1}\cup Y_{1})$};
  \node[right=of right, label=below:{$c_{e}(t)=M$}] (restright) {$E\setminus(X_{2}\cup Y_{2})$};

  \draw[p1] (left.north west) to (shared.north west);
  \draw[p1] (left.south west) to (shared.south west);

  \draw[p2] (right.north east) to (shared.north east);
  \draw[p2] (right.south east) to (shared.south east);

  \draw[both] (shared.north east) to (shared.north west);
  \draw[both] (shared.south east) to (shared.south west);
  \draw[p1,dashed] (shared.north east) to (shared.south east);
  \draw[p2,dashed] (shared.north west) to (shared.south west);

  \draw[p1!50] (left.north west) to (restleft.north west);
  \draw[p1!50] (restleft.north west) to (restleft.south west);
  \draw[p1!50] (restleft.south west) to (left.south west);
  \draw[p1!50, dashed] (left.north west) to (left.south west);

  \draw[p2!50] (right.north east) to (restright.north east);
  \draw[p2!50] (restright.north east) to (restright.south east);
  \draw[p2!50] (restright.south east) to (right.south east);
  \draw[p2!50, dashed] (right.north east) to (right.south east);
\end{tikzpicture}
